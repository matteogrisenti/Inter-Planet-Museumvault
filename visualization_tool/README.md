# PDDL Planning Visualizer
A modular Python tool that creates visual simulations of PDDL planning solutions. It parses domain, problem, and plan files to build an animated environment that shows how actions are executed step-by-step.

## ðŸ›  Setup

### 1. Python Environment
Create the virtual environment: 
```bash
python3 -m venv myenv
```
Activate the environment: 
```bash
source myenv/bin/activate
```
Install requirements: pip install matplotlib>=3.5.0 numpy>=1.21.0 Pillow>=9.0.0
```bash
pip install -r visualization_tool/requirements.txt
```

### 2. System Requirements (Optional)

**For Mode 6 (Policy Graph):** This mode requires **Graphviz** to render PNG images locally.

* **Ubuntu/Debian:** `sudo apt-get install graphviz`
* **MacOS:** `brew install graphviz`
* **Windows:** Download the installer from [graphviz.org](https://graphviz.org/download/).

> **Note:** If you do not wish to install Graphviz, the tool will still generate a `.dot` file. You can copy its content and paste it into an online viewer like [GraphvizOnline](https://dreampuf.github.io/GraphvizOnline/) or [Edotor](https://edotor.net/) to see the graph.

## ðŸš€ Usage
Run the script by pointing it to the directory containing your domain.pddl, problem.pddl, and sas_plan files:

```bash
cd visualization_tool/
python main.py <directory> 
```

example:
```bash
python main.py ../2.1
```

**Interactive Mode**: When you run the script, you will be prompted to choose a visualization type:
- Option 1: Animated GIF (all steps) - A complete animation of the entire plan.
- Option 2: Animated GIF (first 50 steps) - A fast preview for debugging long plans.
- Option 3: Static comparison (initial vs final) - A side-by-side PNG snapshot.
- Option 4: Generate Comic Book - Creates a series of images and text logs representing "Episodes" (Transit vs. Delivery).
- Option 5: View Comic Book - Launches an interactive window to read through the generated comic episodes.
- Option 6: Policy Graph Visualization - Generates a cyclic graph representing the policy logic (requires *policy/* subdirectory).


## ðŸ–¼ Output
By default, visualizations are saved in the /<directory>/outputs/ directory:
- *pddl_full_simulation.gif*: Complete animated simulation of the plan.
- *pddl_preview_50.gif*: A preview focusing on the first 50 actions.
- *pddl_static_comparison.png*: Side-by-side view of the initial and final states.
- *comic_book/*: A subdirectory containing *page_XXX.png* and *page_XXX.json* files for every episode generated by Option 4.
- *cyclic_graph.png*: (Mode 6) The rendered graph of the policy.
- *cyclic_graph.dot*: (Mode 6) The raw graph definition file (use this if you don't have Graphviz installed).

NB: The output directory is typically ignored by .gitignore to avoid cluttering the repository with generated files.



## ðŸ“‚ Project Structure
The code is organized into separate modules for maintainability:
```graphql
visualization_tool/
â”œâ”€â”€ main.py: The entry point that handles user input and orchestrates the process.
â”œâ”€â”€ parser.py: Handles the regex parsing of PDDL and SAS plan files.
â”œâ”€â”€ world.py: Tracks the logical state (robot position, artifact status, etc.).
â”œâ”€â”€ renderer.py: Manages Matplotlib logic, drawing frames, and saving animations.
â”œâ”€â”€ comic_book.py: Handles the generation and interactive viewing of the Comic Book mode.
â””â”€â”€ policy_visualization.py: Handles parsing SAS/Policy output and generating Graphviz DOT files.
```
